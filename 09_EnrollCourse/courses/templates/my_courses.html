{% extends "layout.html" %}

{% block title %}My Courses{% endblock %}

{% block content %}
<h1>My Courses</h1>

{% for enrollment in enrollments %}
    <div class="card mb-3" style="width: 18rem;">
        <div class="card-body">
            <h5 class="card-title">{{ enrollment.course.title }}</h5>
            <p class="card-text">{{ enrollment.course.description }}</p>

            <p class="card-text">
                <strong>Enrolled on:</strong>
                {{ enrollment.enrolled_date|date:"M d, Y" }}
            </p>

            <p class="card-text">
                <strong>Status:</strong>
                {{ enrollment.status }}
            </p>

    <form method="post" action="{% url 'courses:update_enrollment_status' enrollment.id %}">
        {% csrf_token %}

        <label class="form-label"><strong>Status:</strong></label>
        <select name="status" class="form-select mb-2">
            {% for key, label in enrollment.STATUS_CHOICES %}
                <option value="{{ key }}"
                    {% if enrollment.status == key %}selected{% endif %}
                >
                    {{ label }}
                </option>
            {% endfor %}
        </select>

        <button type="submit" class="btn btn-sm btn-primary">
            Update Status
        </button>

    </form>

        </div>
    </div>
{% empty %}
    <p>You are not enrolled in any courses.</p>
{% endfor %}

{% endblock %}
